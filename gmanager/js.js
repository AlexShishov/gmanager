var Gmanager={_editId:null,_getKey:function(a){if(null==a.which&&(null!=a.charCode||null!=a.keyCode))a.which=null!=a.charCode?a.charCode:a.keyCode;return a.which},_insAtCaret:function(a,b){var c;a.focus();if("selection"in document){c=document.selection.createRange();if(c.parentElement()!==a)return;c.text=b;c.select()}else"selectionStart"in a?(c=a.selectionStart,a.value=a.value.substr(0,c)+b+a.value.substr(a.selectionEnd,a.value.length),c+=b.length,a.setSelectionRange(c,c)):a.value+=b;a.focus()},_getCaretPosition:function(a){var b,
c;if("selectionStart"in a)return a.selectionStart;b=document.selection.createRange();c=a.createTextRange();a=c.duplicate();c.moveToBookmark(b.getBookmark());a.setEndPoint("EndToStart",c);return a.text.length},_setCaretPosition:function(a,b){var c;"setSelectionRange"in a?a.setSelectionRange(b,b):(c=a.createTextRange(),c.collapse(!0),c.moveStart("character",a.value.substring(0,b).replace(/\n/g,"").length+1),c.moveEnd("character",0),c.select())},number:function(a){var b=this._getKey(a);return a.ctrlKey||
a.altKey||32>b?!0:/[\d]/.test(String.fromCharCode(b))},check:function(a,b,c){if("undefined"!==typeof a[b])if(a[b]instanceof HTMLInputElement)a[b].checked=c;else for(var d=0,e=a[b].length;d<e;d++)a[b][d].checked=c;return!1},checkForm:function(a,b){if("undefined"===typeof a[b])return!1;if(a[b]instanceof HTMLInputElement)return!1===a[b].checked&&window.alert(document.getElementById("chF").innerHTML),a[b].checked;for(var c=0,d=a[b].length;c<d;c++)if(!0===a[b][c].checked)return!0;window.alert(document.getElementById("chF").innerHTML);
return!1},delNotify:function(){return window.confirm(document.getElementById("delN").innerHTML)},paste:function(a){var b=document.getElementById("sql");""!==a&&b&&this._insAtCaret(b,decodeURIComponent(a))},filesDel:function(){var a=document.getElementById("fl").lastChild,b=a.previousSibling;null!==b.previousSibling&&(a.parentNode.removeChild(a),b.parentNode.removeChild(b))},filesAdd:function(){var a=document.getElementById("fl"),b=document.createElement("input");b.setAttribute("name","f[]");b.setAttribute("type",
"file");a.insertBefore(b,null);a.appendChild(document.createElement("br"))},_setEditId:function(){null===this._editId&&(this._editId=document.getElementById("pedit").lastChild.getAttribute("id").substring(1));this._editId++},editAdd:function(a){this._setEditId();var a=a.parentNode.parentNode,b=a.parentNode,c=a.cloneNode(!0);c.setAttribute("id","i"+this._editId);c.cells[0].innerHTML="+";c.cells[1].firstChild.setAttribute("value","");b.insertBefore(c,a.nextSibling)},editDel:function(a){this._setEditId();
a.parentNode.parentNode.parentNode.deleteRow(a.parentNode.parentNode.rowIndex)},formatCode:function(a,b){var c=this._getCaretPosition(b),d=this._getKey(a),e="";if((13===d||10===d)&&!/Opera Mini|Opera Mobi|Opera Tablet/.test(window.navigator.userAgent)){for(var d=b.value.substring(0,c).split("\n"),d=d[d.length-1].split(""),f=0,h=d.length;f<h;f++)if(" "===d[f])e+=" ";else break;"{"===b.value.slice(c-1,c)&&(e+="    ");b.value=b.value.substring(0,c)+"\n"+e+b.value.substring(c,b.value.length);this._setCaretPosition(b,
c+e.length+1);return!1}return!0},textareaLines:function(a){function b(){e.scrollTop=a.scrollTop;e.style.top=a.offsetTop-3+"px";e.style.height=a.offsetHeight-4+"px"}function c(c){var d="",c=a.value.split("\n").length+(!0===c?1:0);if(2>c)d+="1\n";else for(var g=1;g<=c;g++)d+=g+"\n";e.value=d;b()}var d=!1,e=document.createElement("textarea");e.onscroll=function(){b()};e.style.height=a.offsetHeight-4+"px";e.style.width="32px";e.style.position="absolute";e.style.overflow="hidden";e.style.textAlign="right";
e.style.resize="none";e.style.left="0px";e.style.paddingRight="0.2em";e.style.zIndex=0;e.readOnly="readonly";a.style.marginLeft="32px";a.style.zIndex=1;a.style.position="relative";a.parentNode.insertBefore(e,a.nextSibling);c(!1);a.onkeydown=function(a){a=Gmanager._getKey(a);13===a||10===a?c(!0):b()};a.onmousedown=function(){b();d=!0};a.onmouseup=function(){b();d=!1};a.onmousemove=function(){d&&b()};a.onscroll=function(){b()};window.onresize=function(){b()}}};
window.onload=function(){var a=document.getElementsByTagName("textarea"),b,c=[],d=a.length;for(b=0;b<d;b++)c.push(a[b]);for(b=0;b<d;b++)Gmanager.textareaLines(c[b])};